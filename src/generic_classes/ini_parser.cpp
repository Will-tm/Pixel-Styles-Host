/********************************************************************************************/
/* Copyright (c) 2013 RGB Styles															*/
/********************************************************************************************/

/********************************************************************************************/
/* This file is the confidential trade secret information and/or proprietary information	*/
/* of RGB Styles, Inc. Code or other information in this program also may be confidential	*/
/* and/or proprietary to RGB Styles, Inc.													*/
/* All rights reserved.																		*/
/********************************************************************************************/

/********************************************************************************************/
/* Name : ini_parser.cpp																	*/
/* Date : Jul 24 2013																		*/
/* Author : William Markezana																*/
/********************************************************************************************/

/********************************************************************************************/
/* INCLUDES																					*/
/********************************************************************************************/
#include "ini_parser.h"

/********************************************************************************************/
/* CONSTRUCTOR																				*/
/********************************************************************************************/
ini_parser::ini_parser(string _path)
{
	path = _path;
	create_file_if_not_exists();
	read_ini(path, pt);
}

/********************************************************************************************/
/* DESTRUCTOR																				*/
/********************************************************************************************/
ini_parser::~ini_parser()
{
	pt.clear();
}

/********************************************************************************************/
/* PRIVATE FUNCTIONS FUNCTIONS																*/
/********************************************************************************************/
void ini_parser::create_file_if_not_exists()
{
	FILE *file;
	bool file_exists;

	file = fopen(path.c_str(),"r");
	if(file == NULL)
	{
		file_exists = false;
	}
	else
	{
		file_exists = true;
		fclose(file);
	}

	if(file_exists)
	{
	   file = fopen(path.c_str(),"r+b");
	}
	else
	{
		file = fopen(path.c_str(),"w+b");
	}

	if (file != NULL)
	{
		fclose(file);
	}
}

/********************************************************************************************/
/* PUBLIC FUNCTIONS																			*/
/********************************************************************************************/
void ini_parser::save()
{
	write_ini(path, pt);
}

/********************************************************************************************/
/* END OF FILE																				*/
/********************************************************************************************/
